<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hyv√§ Professional Developer - Practice Exam</title>
    <link rel="stylesheet" href="css/style.css">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="js/exams-data-topic-1.js"></script>
    <script src="js/exams-data-topic-2.js"></script>
    <script src="js/exams-data-topic-3.js"></script>
    <script src="js/exams-data-topic-4.js"></script>
    <script src="js/exams-data-topic-5.js"></script>
    <script src="js/exams-data-topic-6.js"></script>
    <script src="js/exams-data-topic-7.js"></script>
    <script src="js/exams-data-topic-8.js"></script>
    <script src="js/topic-names.js"></script>
    <script src="js/study-content.js"></script>
    <script src="js/study-content-topic-1.js"></script>
    <script src="js/study-content-topic-2.js"></script>
    <script src="js/study-content-topic-3.js"></script>
    <script src="js/study-content-topic-4.js"></script>
    <script src="js/study-content-topic-5.js"></script>
    <script src="js/study-content-topic-6.js"></script>
    <script src="js/study-content-topic-7.js"></script>
    <script src="js/study-content-topic-8.js"></script>
</head>
<body>
    <div class="container" x-data="exam()" x-init="init()" x-effect="document.documentElement.classList.toggle('dark-mode', darkMode)">
        <div class="dark-mode-toggle">
            <button @click="toggleDarkMode()" class="theme-toggle-button" :aria-label="darkMode ? 'Switch to light mode' : 'Switch to dark mode'">
                <span x-show="!darkMode">üåô</span>
                <span x-show="darkMode">‚òÄÔ∏è</span>
            </button>
        </div>
        <div class="instructions">
            <h1>Hyv√§ Professional Developer certification prep course</h1>
            <p>Information was scraped from docs.hyva.io on 2026-01-14 and used for question and topic study content generation with LLM. The practice exam does not contain the real exam questions.</p>
            <p>Topic study includes key topics from the official <a href="https://docs.hyva.io/hyva-themes/certification/professional-developer-certification.html">Hyv√§ Professional Developer Certification Guide</a>. There are explanations and examples added to each topic, but this is not 100% guaranteed correct information, please do your own investigation.</p>
            <p>For Magebit internal use only.</p>
        </div>

        <hr class="divider">

        <div x-show="!examStarted" class="topic-study-section">
            <div class="mode-option" @click="toggleTopicStudy()" :class="{ 'is-expanded': topicStudyOpen }">
                <div class="mode-card mode-card-clickable">
                    <strong>Study by Topic</strong>
                    <p>Browse topics and subsections from the Certification Guide. Explanations and examples are added from the official Hyva documentation.</p>
                    <span class="expand-indicator" x-text="topicStudyOpen ? '‚ñº' : '‚ñ∂'"></span>
                </div>
            </div>

            <div x-show="topicStudyOpen" class="study-by-topic-content" style="margin-top: 20px;">
                <div class="study-container">

                    <aside class="study-sidebar">
                        <template x-for="topicNum in [1,2,3,4,5,6,7,8]" :key="topicNum">
                            <div class="sidebar-topic-item">
                                <div class="sidebar-topic-header" @click="toggleStudyTopic(topicNum)">
                                    <span class="sidebar-topic-title" x-text="topicNum + '. ' + getTopicName(topicNum)"></span>
                                    <span class="sidebar-arrow" x-text="expandedStudyTopics[topicNum] ? '‚ñº' : '‚ñ∂'"></span>
                                </div>

                                <div x-show="expandedStudyTopics[topicNum]" class="sidebar-subsections">
                                    <template x-for="(subsection, subIndex) in (getStudyTopic(topicNum)?.subsections || [])" :key="topicNum + '-' + subIndex">
                                        <div
                                                class="sidebar-sub-item"
                                                :class="{ 'active': activeStudyTopic === topicNum && activeStudySubsection === subIndex }"
                                                @click="setActiveStudy(topicNum, subIndex)"
                                        >
                                            <span x-text="(subIndex + 1) + '. ' + subsection.title"></span>
                                        </div>
                                    </template>

                                    <div x-show="!(getStudyTopic(topicNum)?.subsections?.length)" style="padding: 10px; font-size: 12px; color: #999;">
                                        No content available yet.
                                    </div>
                                </div>
                            </div>
                        </template>
                    </aside>

                    <main class="study-content-viewer">
                        <template x-if="getActiveStudyContent()">
                            <div>
                                <div class="viewer-header">
                                    <span class="viewer-topic-label" x-text="getTopicName(activeStudyTopic)"></span>
                                    <h2 class="viewer-title" x-text="getActiveStudyContent().title"></h2>
                                </div>
                                <div class="study-content-body" x-html="getActiveStudyContent().content"></div>
                            </div>
                        </template>

                        <template x-if="!getActiveStudyContent()">
                            <div style="text-align: center; color: #666; padding-top: 50px;">
                                <p>Select a topic from the menu on the left to begin studying.</p>
                            </div>
                        </template>
                    </main>

                </div>
            </div>
        </div>

        <hr class="divider" x-show="!examStarted">

        <div x-show="!examStarted" class="mode-selection">
            <h2 class="section-title">Select Exam Mode</h2>

            <div class="mode-options">
                <label class="mode-option">
                    <input type="radio" name="examMode" value="full" x-model="examMode" @change="updatePreview()">
                    <div class="mode-card">
                        <strong>Full Exam</strong>
                        <p>Random questions maintaining official topic ratios (max 60 questions)</p>
                    </div>
                </label>

                <label class="mode-option">
                    <input type="radio" name="examMode" value="topic" x-model="examMode" @change="updatePreview()">
                    <div class="mode-card">
                        <strong>Questions by topics</strong>
                        <p>Random questions from selected topics</p>
                    </div>
                </label>
            </div>

            <div x-show="examMode === 'topic'" class="topic-selection">
                <h3 class="subsection-title">Select Topics</h3>
                <div class="topics-grid">
                    <template x-for="topicNum in [1,2,3,4,5,6,7,8]" :key="topicNum">
                        <label class="topic-checkbox">
                            <input
                                type="checkbox"
                                :value="topicNum"
                                x-model="selectedTopics"
                                @change="updatePreview()"
                            >
                            <span class="topic-label">
                                <strong x-text="'Topic ' + topicNum + ':'"></strong>
                                <span x-text="getTopicName(topicNum)"></span>
                            </span>
                        </label>
                    </template>
                </div>
            </div>

            <div x-show="examMode" class="exam-preview">
                <h3 class="subsection-title">Exam Preview</h3>
                <div class="preview-info">
                    <p><strong>Mode:</strong> <span x-text="getModeName()"></span></p>
                    <p x-show="selectedTopics.length > 0">
                        <strong>Selected Topics:</strong>
                        <span x-text="selectedTopics.map(t => getTopicName(t)).join(', ')"></span>
                    </p>
                    <p><strong>Estimated Questions:</strong> <span x-text="estimatedQuestions"></span></p>
                </div>
                <button class="start-exam-button" @click="startExam()" :disabled="!canStartExam()">
                    Start Exam
                </button>
            </div>
        </div>

        <!-- Back to Mode Selection Button -->
        <div x-show="examStarted" class="back-to-selection-container">
            <button @click="backToModeSelection()" class="back-to-selection-button">
                ‚Üê Back to Exam Mode Selection
            </button>
        </div>

        <h1 x-show="examStarted" class="exam-title" x-text="examTitle"></h1>

        <div x-show="loading" class="loading">
            <p>Generating exam...</p>
        </div>

        <div x-show="error" class="error">
            <p x-text="error"></p>
        </div>

        <!-- Exam Content -->
        <div x-show="examStarted && !loading && !error && questions.length > 0">
            <!-- Questions -->
            <div class="questions-container">
                <template x-for="(question, index) in questions" :key="question.id">
                    <div class="question-block">
                        <div class="question-header">
                            <span class="question-number" x-text="question.questionNumber || (index + 1)"></span>
                            <span class="question-text" x-text="question.question"></span>
                            <span x-show="question.isMultiple" class="multiple-badge">(Choose two)</span>
                        </div>

                        <!-- Options -->
                        <div class="options-container">
                            <template x-for="key in getSortedOptionKeys(question.options)" :key="key">
                                <label class="option-label"
                                       :class="{
                                           'correct': submitted && showAnswers[question.id] && question.correctAnswer.includes(key),
                                           'incorrect': submitted && showAnswers[question.id] && selectedAnswers[question.id] && selectedAnswers[question.id].includes(key) && !question.correctAnswer.includes(key)
                                       }">
                                    <input
                                        type="checkbox"
                                        :name="'q_' + question.id"
                                        :value="key"
                                        x-model="selectedAnswers[question.id]"
                                        :disabled="submitted"
                                        @change="handleAnswerChange(question, key, $event)"
                                    >
                                    <span class="option-letter" x-text="key + '.'"></span>
                                    <span class="option-text" x-text="question.options[key]"></span>
                                </label>
                            </template>
                        </div>

                        <!-- Answer Button -->
                        <button
                            class="answer-button"
                            @click="toggleAnswer(question.id)"
                            x-text="showAnswers[question.id] ? 'Hide Answer' : 'Answer'"
                        ></button>

                        <!-- Explanation -->
                        <div x-show="showAnswers[question.id]" class="explanation">
                            <strong>Correct Answer(s):</strong>
                            <span x-text="question.correctAnswer.join(', ')"></span>
                            <br><br>
                            <strong>Explanation:</strong>
                            <p x-text="question.explanation"></p>
                        </div>
                    </div>
                </template>
            </div>

            <!-- Submit Button -->
            <div class="submit-container">
                <button
                    class="submit-button"
                    @click="submitExam()"
                    x-show="!submitted"
                >
                    Submit
                </button>
            </div>

            <!-- Results -->
            <div x-show="submitted" class="results">
                <h2 class="results-title">Your Results</h2>
                <div class="score-display">
                    <p class="score-text">
                        Score: <span x-text="score"></span> out of <span x-text="totalQuestions"></span>
                    </p>
                    <p class="percentage-text">
                        Percentage: <span x-text="percentage"></span>%
                    </p>
                </div>
                <button class="new-exam-button" @click="resetExam()">
                    Start New Exam
                </button>
            </div>
        </div>
    </div>

    <script src="js/exam-topic.js"></script>
</body>
</html>
