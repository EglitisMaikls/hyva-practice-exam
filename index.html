<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <title>Hyvä Professional Developer Preparation Course</title>
    <link rel="stylesheet" href="css/style.css">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="js/exam-engine.js"></script>
    <script src="js/exam-persistence.js"></script>
    <script src="js/main.js"></script>
    <script src="js/exams-data-topic-1.js"></script>
    <script src="js/exams-data-topic-2.js"></script>
    <script src="js/exams-data-topic-3.js"></script>
    <script src="js/exams-data-topic-4.js"></script>
    <script src="js/exams-data-topic-5.js"></script>
    <script src="js/exams-data-topic-6.js"></script>
    <script src="js/exams-data-topic-7.js"></script>
    <script src="js/exams-data-topic-8.js"></script>
    <script src="js/topic-names.js"></script>
    <script src="js/study-content-topic-1.js"></script>
    <script src="js/study-content-topic-2.js"></script>
    <script src="js/study-content-topic-3.js"></script>
    <script src="js/study-content-topic-4.js"></script>
    <script src="js/study-content-topic-5.js"></script>
    <script src="js/study-content-topic-6.js"></script>
    <script src="js/study-content-topic-7.js"></script>
    <script src="js/study-content-topic-8.js"></script>
</head>
<body>
    <div class="container" x-data="exam()" x-init="init()" x-effect="document.documentElement.classList.toggle('dark-mode', darkMode)">
        <div class="dark-mode-toggle">
            <button type="button"
                    @click="toggleDarkMode()"
                    class="theme-toggle-btn"
                    :aria-label="darkMode ? 'Switch to light mode' : 'Switch to dark mode'"
                    :aria-pressed="darkMode">
                <span class="theme-icon theme-icon-moon" aria-hidden="true">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M20.2496 14.1987C19.5326 14.3951 18.7782 14.5 18 14.5C13.3056 14.5 9.5 10.6944 9.5 5.99999C9.5 5.22185 9.60487 4.4674 9.80124 3.75043C6.15452 4.72095 3.46777 8.04578 3.46777 11.9981C3.46777 16.7114 7.28864 20.5323 12.0019 20.5323C15.9543 20.5323 19.2791 17.8455 20.2496 14.1987ZM20.5196 12.5328C19.7378 12.8346 18.8882 13 18 13C14.134 13 11 9.86598 11 5.99999C11 5.11181 11.1654 4.26226 11.4671 3.48047C11.6142 3.09951 11.7935 2.73464 12.0019 2.38923C12.0888 2.24526 12.1807 2.10466 12.2774 1.9677C12.1858 1.96523 12.094 1.96399 12.0019 1.96399C11.4758 1.96399 10.9592 2.00448 10.455 2.0825C5.64774 2.8264 1.96777 6.98251 1.96777 11.9981C1.96777 17.5398 6.46021 22.0323 12.0019 22.0323C17.0176 22.0323 21.1737 18.3523 21.9176 13.545C21.9956 13.0408 22.0361 12.5242 22.0361 11.9981C22.0361 11.906 22.0348 11.8141 22.0323 11.7226C21.8953 11.8193 21.7547 11.9112 21.6107 11.9981C21.2653 12.2065 20.9005 12.3858 20.5196 12.5328Z" fill="currentColor"></path>
                    </svg>
                </span>
                <span class="theme-icon theme-icon-sun" aria-hidden="true">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.0002 3.29071V1.76746M5.8418 18.1585L4.7647 19.2356M12.0002 22.2326V20.7093M19.2357 4.76456L18.1586 5.84166M20.7095 12H22.2327M18.1586 18.1584L19.2357 19.2355M1.76758 12H3.29083M4.76462 4.7645L5.84173 5.8416M15.7123 8.2877C17.7626 10.338 17.7626 13.6621 15.7123 15.7123C13.6621 17.7626 10.338 17.7626 8.2877 15.7123C6.23745 13.6621 6.23745 10.338 8.2877 8.2877C10.338 6.23745 13.6621 6.23745 15.7123 8.2877Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="square" stroke-linejoin="round"></path>
                    </svg>
                </span>
            </button>
        </div>
        <div class="instructions">
            <h1>Hyvä Professional Developer certification preparation course</h1>
            <p>Information was scraped from docs.hyva.io on 2026-01-14 and used for question and topic study content generation with LLM. The practice exam does not contain the real exam questions.</p>
            <p>Topic study includes key topics from the official <a href="https://docs.hyva.io/hyva-themes/certification/professional-developer-certification.html">Hyvä Professional Developer Certification Guide</a>. There are explanations and examples added to each topic, but this is not 100% guaranteed correct information, please do your own investigation.</p>
        </div>

        <div x-show="topicStudyOpen" class="back-to-selection-container">
            <button @click="closeTopicStudy()" class="back-to-selection-button" type="button">
                Go back to Main
            </button>
        </div>

        <hr class="divider">

        <div x-show="!examStarted" class="topic-study-section">
            <div x-show="!topicStudyOpen" class="mode-option" @click="toggleTopicStudy()" :class="{ 'is-expanded': topicStudyOpen }">
                <div class="mode-card mode-card-clickable">
                    <strong>Study by Topic</strong>
                    <p>Browse topics and subsections from the Certification Guide. Explanations and examples are added from the official Hyva documentation.</p>
                </div>
            </div>

            <!-- Study by Topic Content -->

            <div x-show="topicStudyOpen" class="study-by-topic-content" style="margin-top: 20px;">
                <div class="study-container">

                    <aside class="study-sidebar">
                        <template x-for="topicNum in [1,2,3,4,5,6,7,8]" :key="topicNum">
                            <div class="sidebar-topic-item">
                                <div class="sidebar-topic-header" @click="toggleStudyTopic(topicNum)">
                                    <span class="sidebar-topic-title" x-text="topicNum + '. ' + getTopicName(topicNum)"></span>
                                </div>

                                <div x-show="expandedStudyTopics[topicNum]" class="sidebar-subsections">
                                    <template x-for="(subsection, subIndex) in (getStudyTopic(topicNum)?.subsections || [])" :key="topicNum + '-' + subIndex">
                                        <div
                                                class="sidebar-sub-item"
                                                :class="{ 'active': activeStudyTopic === topicNum && activeStudySubsection === subIndex }"
                                                @click="setActiveStudy(topicNum, subIndex)"
                                        >
                                            <span x-text="(subIndex + 1) + '. ' + subsection.title"></span>
                                        </div>
                                    </template>

                                    <div x-show="!(getStudyTopic(topicNum)?.subsections?.length)" style="padding: 10px; font-size: 12px; color: #999;">
                                        No content available yet.
                                    </div>
                                </div>
                            </div>
                        </template>
                    </aside>

                    <main class="study-content-viewer">
                        <template x-if="getActiveStudyContent()">
                            <div>
                                <div class="viewer-header">
                                    <span class="viewer-topic-label" x-text="getTopicName(activeStudyTopic)"></span>
                                    <h2 class="viewer-title" x-text="getActiveStudyContent().title"></h2>
                                </div>
                                <div class="study-content-body" x-html="getActiveStudyContent().content"></div>
                            </div>
                        </template>

                        <template x-if="!getActiveStudyContent()">
                            <div style="text-align: center; color: #666; padding-top: 50px;">
                                <p>Select a topic from the menu on the left to begin studying.</p>
                            </div>
                        </template>
                    </main>

                </div>
            </div>
        </div>

        <hr class="divider" x-show="!examStarted && !topicStudyOpen">

        <div x-show="!examStarted && !topicStudyOpen" class="mode-selection">

            <div class="mode-options">
                <label class="mode-option">
                    <input type="radio" name="examMode" value="full" x-model="examMode" @change="updatePreview()">
                    <div class="mode-card">
                        <strong>Full Exam mode</strong>
                        <p>Random questions maintaining official topic ratios (max 60 questions)</p>
                    </div>
                </label>

                <label class="mode-option">
                    <input type="radio" name="examMode" value="topic" x-model="examMode" @change="updatePreview()">
                    <div class="mode-card">
                        <strong>Questions by topics</strong>
                        <p>Random questions from selected topics</p>
                    </div>
                </label>
            </div>

            <div x-show="examMode === 'topic'" class="topic-selection">
                <h3 class="subsection-title">Select Topics</h3>
                <div class="topics-grid">
                    <template x-for="topicNum in [1,2,3,4,5,6,7,8]" :key="topicNum">
                        <label class="topic-checkbox">
                            <input
                                type="checkbox"
                                :value="topicNum"
                                x-model="selectedTopics"
                                @change="updatePreview()"
                            >
                            <span class="topic-label">
                                <strong x-text="'Topic ' + topicNum + ':'"></strong>
                                <span x-text="getTopicName(topicNum)"></span>
                            </span>
                        </label>
                    </template>
                </div>
            </div>

            <div x-show="examMode" class="exam-preview">
                <h3 class="subsection-title">Exam Preview</h3>
                <div class="preview-info">
                    <p><strong>Mode:</strong> <span x-text="getModeName()"></span></p>
                    <p x-show="selectedTopics.length > 0">
                        <strong>Selected Topics:</strong>
                        <span x-text="selectedTopics.map(t => getTopicName(t)).join(', ')"></span>
                    </p>
                    <p><strong>Estimated Questions:</strong> <span x-text="estimatedQuestions"></span></p>
                </div>
                <button class="start-exam-button" @click="startExam()" :disabled="!canStartExam()">
                    Start Exam
                </button>
            </div>
        </div>

        <div x-show="examStarted" class="back-to-selection-container">
            <button @click="backToModeSelection()" class="back-to-selection-button">
                Go back and reset
            </button>
            <p class="exam-infotext">* Exam state is saved in localStorage if you stay in this page.</p>
        </div>

        <h1 x-show="examStarted" class="exam-title" x-text="examTitle"></h1>

        <div x-show="loading" class="loading">
            <p>Generating exam...</p>
        </div>

        <div x-show="error" class="error">
            <p x-text="error"></p>
        </div>

        <!-- Exam Content -->
        <div x-show="examStarted && !loading && !error && questions.length > 0">
            <div class="questions-container">
                <template x-for="(question, index) in questions" :key="question.id">
                    <div class="question-block">
                        <div class="question-header">
                            <span class="question-number" x-text="question.questionNumber || (index + 1)"></span>
                            <span class="question-text" x-text="question.question"></span>
                            <span x-show="question.isMultiple" class="multiple-badge">(Choose two)</span>
                        </div>

                        <div class="options-container">
                            <template x-for="key in getSortedOptionKeys(question.options)" :key="key">
                                <label class="option-label"
                                       :class="{
                                           'correct': submitted && showAnswers[question.id] && question.correctAnswer.includes(key),
                                           'incorrect': submitted && showAnswers[question.id] && selectedAnswers[question.id] && selectedAnswers[question.id].includes(key) && !question.correctAnswer.includes(key)
                                       }">
                                    <input
                                        type="checkbox"
                                        :name="'q_' + question.id"
                                        :value="key"
                                        x-model="selectedAnswers[question.id]"
                                        :disabled="submitted"
                                        @change="handleAnswerChange(question, key, $event)"
                                    >
                                    <span class="option-letter" x-text="key + '.'"></span>
                                    <span class="option-text" x-text="question.options[key]"></span>
                                </label>
                            </template>
                        </div>

                        <button
                            class="answer-button"
                            @click="toggleAnswer(question.id)"
                            x-text="showAnswers[question.id] ? 'Hide Answer' : 'Answer'"
                        ></button>

                        <div x-show="showAnswers[question.id]" class="explanation">
                            <strong>Correct Answer(s):</strong>
                            <span x-text="question.correctAnswer.join(', ')"></span>
                            <br><br>
                            <strong>Explanation:</strong>
                            <div class="explanation-content" x-html="question.explanation"></div>
                        </div>
                    </div>
                </template>
            </div>

            <div class="submit-container">
                <button
                    class="submit-button"
                    @click="submitExam()"
                    x-show="!submitted"
                >
                    Submit
                </button>
            </div>

            <!-- Results -->
            <div x-show="submitted" class="results">
                <h2 class="results-title">Your Results</h2>
                <div class="score-display">
                    <p class="score-text">
                        Score: <span x-text="score"></span> out of <span x-text="totalQuestions"></span>
                    </p>
                    <p class="percentage-text">
                        Percentage: <span x-text="percentage"></span>%
                    </p>
                </div>
                <button class="new-exam-button" @click="resetExam()">
                    Start New Exam
                </button>
            </div>
        </div>
    </div>
</body>
</html>
